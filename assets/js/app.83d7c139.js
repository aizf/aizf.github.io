(function(t){function e(e){for(var r,o,s=e[0],c=e[1],l=e[2],d=0,h=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&h.push(i[o][0]),i[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(h.length)h.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(r=!1)}r&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},i={app:0},a=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0255":function(t,e,n){},"0414":function(t,e,n){"use strict";var r=n("2929"),i=n.n(r);i.a},2633:function(t,e,n){"use strict";var r=n("6408"),i=n.n(r);i.a},2929:function(t,e,n){},"2c72":function(t,e,n){"use strict";var r=n("91fb"),i=n.n(r);i.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e44b"),n("6648"),n("5f54"),n("f0e6");var r=n("0261"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("a-layout",{staticStyle:{"min-height":"100vh"},attrs:{id:"app-layout"}},[n("a-layout-header",{staticClass:"header",staticStyle:{height:"50px"}},[n("div",{staticClass:"logo"}),n("a-menu",{style:{lineHeight:"50px"},attrs:{theme:"dark",mode:"horizontal",defaultSelectedKeys:["1"]}},[n("a-menu-item",{key:"1",on:{click:function(e){t.currentPageKey="1"}}},[t._v("Data")]),n("a-menu-item",{key:"2",attrs:{disabled:!t.dataSelected},on:{click:function(e){t.currentPageKey="2"}}},[n("a-tooltip",{attrs:{placement:"bottom",title:t.pageViewTooltipTitle}},[t._v("View")])],1),n("a-menu-item",{key:"3",attrs:{disabled:!t.dataSelected},on:{click:function(e){t.currentPageKey="3"}}},[n("a-tooltip",{attrs:{placement:"bottom",title:t.pageAnalyzeTooltipTitle}},[t._v("Analyze")])],1)],1)],1),n("keep-alive",[n(t.currentPage,{tag:"component"})],1)],1)],1)},a=[],o=(n("5ab2"),n("6d57"),n("e10e"),n("4ca4")),s=n("08c1"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-layout",[n("a-layout-sider",{staticStyle:{background:"#fff"},attrs:{width:"200",theme:"light",collapsible:"",collapsedWidth:"80"}},[n("a-menu",{style:{height:"100%",borderRight:0},attrs:{mode:"inline",defaultSelectedKeys:["1"],defaultOpenKeys:["sub1"],inlineIndent:24}},[n("a-sub-menu",{key:"sub1"},[n("span",{attrs:{slot:"title"},slot:"title"},[n("a-icon",{attrs:{type:"database"}}),n("span",[t._v("Dataset")])],1),t._l(t.datasetsTypes,(function(e){return n("a-menu-item-group",{key:e,attrs:{title:e}},t._l(t.datasetsTypeDict[e],(function(e){return n("a-menu-item",{key:e.name,on:{click:t.loadData}},[t._v(t._s(e.name))])})),1)}))],2)],1)],1),n("a-layout",{staticStyle:{padding:"0 0px 0 5px"}},[n("a-layout-content",{style:{background:"#fff",padding:"24px",margin:0}},[n("a-tabs",{style:{height:"100%"},attrs:{defaultActiveKey:"0"}},t._l(t.tabContents,(function(e,r){return n("a-tab-pane",{key:r+1,attrs:{tab:t.tabs[r]}},[n("codemirror",{ref:"myCm",refInFor:!0,attrs:{value:e,options:t.cmOptions}})],1)})),1)],1)],1)],1)},l=[],u={state:{datasetsTypes:["node-link","hierarchical","node"],datasets:{energy:{name:"energy",fileName:"energy.json",dataType:"node-link",nodeFields:{id:{alias:"id",type:"cat"}}},miserables:{name:"miserables",fileName:"miserables.json",dataType:"node-link",nodeFields:{id:{alias:"id",type:"cat"},group:{alias:"group",type:"cat"}}},epinions_1_percent:{name:"epinions_1_percent",fileName:"epinions_1_percent.json",dataType:"node-link",nodeFields:{id:{alias:"id",type:"cat"},group:{alias:"group",type:"cat"},type:{alias:"type",type:"cat"}}},removed_Epinions_10_percent:{name:"removed_Epinions_10_percent",fileName:"removed_Epinions_10_percent.json",dataType:"node-link",nodeFields:{id:{alias:"id",type:"cat"},group:{alias:"group",type:"cat"},type:{alias:"type",type:"cat"}}},epinions:{name:"epinions",fileName:"epinions.json",dataType:"node-link",nodeFields:{id:{alias:"id",type:"cat"},group:{alias:"group",type:"cat"},type:{alias:"type",type:"cat"}}},readme:{name:"readme",fileName:"readme.json",dataType:"hierarchical",nodeFields:{id:{alias:"id",type:"cat"},size:{alias:"size",type:"linear"}}},test:{name:"test",fileName:"test.json",dataType:"hierarchical",nodeFields:{id:{alias:"id",type:"cat"},size:{alias:"size",type:"linear"}}},cars:{name:"cars",fileName:"cars.json",dataType:"node",nodeFields:{Name:{alias:"Name",type:"cat"},Miles_per_Gallon:{alias:"Miles per Gallon",type:"linear"},Cylinders:{alias:"Cylinders",type:"linear"},Displacement:{alias:"Displacement",type:"linear"},Horsepower:{alias:"Horsepower",type:"linear"},Weight_in_lbs:{alias:"Weight in lbs",type:"linear"},Acceleration:{alias:"Acceleration",type:"linear"},Year:{alias:"Year",type:"time"},Origin:{alias:"Origin",type:"cat"}}},jobs:{name:"jobs",fileName:"jobs.json",dataType:"node",nodeFields:{job:{alias:"job",type:"cat"},sex:{alias:"sex",type:"cat"},year:{alias:"year",type:"cat"},count:{alias:"count",type:"linear"},perc:{alias:"perc",type:"linear"}}},barley:{name:"barley",fileName:"barley.json",dataType:"node",nodeFields:{yield:{alias:"job",type:"linear"},variety:{alias:"job",type:"cat"},year:{alias:"job",type:"cat"},site:{alias:"job",type:"cat"}}}},selectedDataset:"",sourceData:{},visualData:{},nodesTotalNum:0},mutations:{changeSelectedDataset:function(t,e){t.selectedDataset=e},updateSourceData:function(t,e){t.sourceData=e},updateVisualData:function(t,e){t.visualData=e},updateNodesTotalNum:function(t,e){t.nodesTotalNum=e}},actions:{}},d=u,h={state:{dpiX:1920,dpiY:1080,backgroundColor:"#333",contrastColor:"#eee",colorPalette:["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],colorPalette2:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],operationTypes:["click","drag","mouseover","brush","classification","invertBrush","zoom","filter","undo","redo","rollback"],operation_Types:["rollback","filter","undo","redo"],backOps:["undo","redo","rollback"],parentUUID:"none",currentUUID:"root",chartsNeedUpdate:{force:!1,scatter:!1,table:!1}},mutations:{updateParentUUID:function(t,e){t.parentUUID=e},updateCurrentUUID:function(t,e){t.currentUUID=e},ForceUpdated:function(t){var e=t.chartsNeedUpdate;e.force=!1},ScatterUpdated:function(t){var e=t.chartsNeedUpdate;e.scatter=!1},TableUpdated:function(t){var e=t.chartsNeedUpdate;e.table=!1},ChartsNeedUpdate:function(t){var e=t.chartsNeedUpdate;for(var n in e)e[n]=!0}},actions:{}},f=h,p=n("8e0d");n("06a2"),n("2aa3");function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var b={state:{currentOperations:[],uuids:new Set,undoList:[],redoList:[],pageAnalyzeTooltipData:{nodes:[],links:[]},operations:[],operations_:[],existingViews:{},recordset:[],recordData:function(t){var e=function t(e){var n=e.index,r=e.data,i=e.operation,a=e.time;Object(p["a"])(this,t),this.index=n,this.data=r,this.operation=i,this.time=a};return new e(t)}},mutations:{addRecordData:function(t,e){var n=t.recordData(e);t.recordset.push(n),"undo"===e.operation?t.redoList.unshift(e.data):(t.undoList.push(e.data),"redo"!==e.operation&&(t.redoList=[]))},addOperation:function(t,e){t.operations.push(e)},addOperation_:function(t,e){t.operations_.push(v({},e,{},{max:"zoom"}))},change_uuids:function(t,e){e(t.uuids)},addCurrentOperations:function(t,e){t.currentOperations.push(e)},resetCurrentOperations:function(t){t.currentOperations=[]},changeUndoRedo:function(t,e){e(t.undoList,t.redoList)},updatePageAnalyzeTooltip:function(t,e){t.pageAnalyzeTooltipData=e},resetOperations:function(t){t.operations=[],t.operations_=[]},handleExistingViews:function(t,e){e(t.existingViews)},clearExistingViews:function(t){t.existingViews={}},resetRecordset:function(t){t.recordset=[]}},actions:{}},m=b,g=(n("e204"),n("6f84"),n("309f"),n("0b53"),n("de78"),n("93ff"));n("ed63"),n("8cf2"),n("cc57"),n("c904");function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var k={nodes:function(t){return t.data.visualData.nodes},links:function(t){return t.data.visualData.links},nodesNumber:function(t){return t.data.visualData.nodes.length},linksNumber:function(t){return t.data.visualData.links.length},nodeFields__:function(t){return t.data.datasets[t.data.selectedDataset].nodeFields},nodeFields:function(t,e){return Object.keys(e.nodeFields__).sort()},hierarchical2nodeLink:function(t){if(t.data.sourceData){var e=[];return n(t.data.sourceData),{nodes:e,links:r(e)}}function n(t){t.children&&t.children.forEach(n),t.id||(t.id=t.name),e.push(t)}function r(t){var e=[];return t.forEach((function(t){t.children&&t.children.forEach((function(n){e.push({source:t,target:n})}))})),e}},tmpExistingViews:function(t){var e=t.view.currentUUID;return Object.keys(t.analyze.existingViews).includes(e+"")?t.analyze.existingViews:(t.data.visualData.uuid=e,w({},t.analyze.existingViews,Object(o["a"])({},e,t.data.visualData)))},recordFlow:function(t,e){var n=Object(g["a"])(t.analyze.recordset);n.push(t.analyze.recordData({index:t.analyze.recordset.length,data:e.tmpExistingViews[t.view.currentUUID],operation:"current",time:new Date}));for(var r=Object.values(e.tmpExistingViews).map((function(t){return{data:t,fixedValue:t.nodes.length}})),i=[],a=1;a<n.length;a++){switch(n[a-1].operation){case"undo":case"redo":case"rollback":continue;default:break}i.push({operation:n[a-1].operation,source:n[a-1].data.uuid,target:n[a].data.uuid})}return{nodes:r,links:i}},markedVisualData:function(t,e){return Object.values(e.tmpExistingViews).filter((function(t){return t.marked}))},viewSlice:function(t){return function(){var e=[],n=t.data.visualData.nodes.filter((function(t){return!!t.selected||(e.push(t),!1)})),r=t.data.visualData.links.filter((function(t){return e.every((function(e){var n=e.id?"id":"name";return e[n]!==t.source[n]&&e[n]!==t.target[n]}))}));return{nodes:n,links:r,uuid:t.view.currentUUID,marked:!1}}},layoutRange:function(){return function(t,e){var n=[];for(var r in e)n[+r]=t[0][e[+r]];var i=!0,a=!1,o=void 0;try{for(var s,c=t.slice(1)[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var l=s.value;for(var u in e)switch(u){case"0":case 0:case"3":case 3:n[+u]=Math.min(l[e[+u]],n[+u]);break;case"1":case 1:case"2":case 2:n[+u]=Math.max(l[e[+u]],n[+u]);break;default:throw new Error("layoutRange args error")}}}catch(d){a=!0,o=d}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}return Object.values(n)}},generateUUID:function(){var t=1;return function(e){return arguments.length?t=+e:t++}},dataDeepClone:function(){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.uuid,n=t.nodes,r=t.links,i=[],a=[],o={},s=!0,c=!1,l=void 0;try{for(var u,d=n[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var h=u.value,f=Object.assign({},h);i.push(f),o[f.id]=f}}catch(w){c=!0,l=w}finally{try{s||null==d.return||d.return()}finally{if(c)throw l}}var p=!0,y=!1,v=void 0;try{for(var b,m=r[Symbol.iterator]();!(p=(b=m.next()).done);p=!0){var g=b.value,O=Object.assign({},g);O.source=o[O.source.id],O.target=o[O.target.id],a.push(O)}}catch(w){y=!0,v=w}finally{try{p||null==m.return||m.return()}finally{if(y)throw v}}return{uuid:e,nodes:i,links:a,marked:t.marked}}},beforeEvent:function(t,e){return function(n,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t.view.backOps,s=t.analyze.recordset.length,c=t.view.currentUUID,l=new Date;Object.keys(t.analyze.existingViews).includes(c+"")||i.$store.commit("handleExistingViews",(function(n){r["a"].set(n,c,e.dataDeepClone(t.data.visualData,c))}));var u=t.analyze.existingViews[c],d={index:s,data:u,operation:n,time:l};i.$store.commit("addRecordData",d),i.$store.commit("updateParentUUID",c),o.includes(n)?(i.$store.commit("updateVisualData",e.dataDeepClone(a)),i.$store.commit("updateCurrentUUID",a.uuid)):(t.data.visualData.marked=!1,i.$store.commit("updateCurrentUUID",e.generateUUID()))}},afterEvent:function(t,e){return function(e,n,r){t.analyze.recordset.length,t.analyze.recordset[t.analyze.recordset.length-2].data,new Date}},dijkstra:function(){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t.length,r=t[0].length,i=new Array(n).fill(0).map((function(t,e){return e}));if(n!==r||e>=n)throw new Error("邻接矩阵错误或者源点错误");for(var a=new Array(n),o=0;o<n;o++)a[o]={value:1/0,path:[]};a[e].value=0;var s=function(){var e=Math.min.apply(Math,Object(g["a"])(a.filter((function(t,e){return i.includes(e)})).map((function(t){return t.value}))));if(e>=1/0)return"break";var n=a.findIndex((function(t,n){return i.includes(n)&&t.value===e}));i.splice(i.indexOf(n),1);for(var o=0;o<r;o++)i.includes(o)&&a[n].value+t[n][o]<a[o].value&&(a[o].path=[].concat(Object(g["a"])(a[n].path),[n]),a[o].value=t[n][o]+a[n].value)};while(i.length>1){var c=s();if("break"===c)break}return a}}},x=k;r["a"].use(s["a"]);var D=new s["a"].Store({modules:{data:d,view:f,analyze:m},state:{},mutations:{},actions:{resetAll:function(t){var e=t.getters,n=t.commit;n("updateNodesTotalNum",e.nodes.length),n("updateParentUUID","none"),n("updateCurrentUUID","root"),e.generateUUID(1),n("changeUndoRedo",(function(t,e){t.splice(0,t.length),e.splice(0,e.length)})),n("resetOperations"),n("change_uuids",(function(t){t.clear(),t.add("root")})),n("resetRecordset"),n("updatePageAnalyzeTooltip",{nodes:[],links:[]}),n("clearExistingViews")}},getters:x}),j=n("94e6"),P=n("8a2b");n("7d2c"),n("1f4f"),n("1e3d"),n("fe18"),n("0338"),n("8fb8");function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var _={name:"PageData",components:{codemirror:P["codemirror"]},data:function(){return{collapsed:!1,tabs:["SourceData","VisualData"],tabContents:Array(2),cmOptions:{tabSize:2,mode:{name:"javascript",json:!0},theme:"lucario",lineNumbers:!0,line:!0,readOnly:"nocursor"}}},computed:C({},Object(s["c"])({selectedDataset:function(t){return t.data.selectedDataset},sourceData:function(t){return t.data.sourceData},visualData:function(t){return t.data.visualData},datasets:function(t){return t.data.datasets},datasetsTypes:function(t){return t.data.datasetsTypes},currentUUID:function(t){return t.view.currentUUID}}),{},Object(s["b"])(["nodes","generateUUID","dataDeepClone"]),{datasetsNames:function(){return Object.keys(this.datasets)},datasetsTypeDict:function(){var t=this,e={};return this.datasetsTypes.forEach((function(t){e[t]=[]})),this.datasetsNames.forEach((function(n){var r=t.datasets[n],i=r.dataType;e[i].push(r)})),e}}),methods:{loadData:function(t){var e,n=this,r=this.datasets[t.key],i="./static/"+r.fileName;t.key!==this.selectedDataset&&(D.commit("changeSelectedDataset",t.key),this.tabContents=[],this.$message.loading("Action in progress..",.3).then((function(){a(r.dataType)(i)})));function a(t){switch(t){case"node-link":return s;case"hierarchical":return o;case"node":return c;default:break}}function o(t){j["json"](t).then((function(t){D.commit("updateSourceData",t),e=D.getters.hierarchical2nodeLink,n.tabContents.push(JSON.stringify(t,null,"\t")),n.tabContents.push(JSON.stringify(e,null,"\t")),l()})).catch((function(t){console.log(t)}))}function s(t){j["json"](t).then((function(t){e={nodes:t.nodes,links:[]},D.commit("updateSourceData",t),e=t,n.tabContents.push(JSON.stringify(t,null,"\t")),n.tabContents.push(JSON.stringify(e,null,"\t")),l()})).catch((function(t){console.log(t)}))}function c(t){j["json"](t).then((function(t){D.commit("updateSourceData",t),e={nodes:t,links:[]},n.tabContents.push(JSON.stringify(t,null,"\t")),n.tabContents.push(JSON.stringify(e,null,"\t")),l()})).catch((function(t){console.log(t)}))}function l(){n.$set(e,"marked",!1);e.nodes.forEach((function(t,e){})),e.links.forEach((function(t){})),D.commit("ChartsNeedUpdate",{force:!0,scatter:!0,table:!0}),D.commit("updateVisualData",e),D.dispatch("resetAll"),n.$message.success("Data loaded.")}},test:function(){console.log("c")},test1:function(t){console.log(t),console.log(t.target)}}},U=_,E=(n("2c72"),n("5511")),T=Object(E["a"])(U,c,l,!1,null,null,null),N=T.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-layout",[n("a-layout-sider",{staticStyle:{background:"#fff"},attrs:{width:"250",theme:"light",collapsible:"",collapsedWidth:"80"}},[n("a-card",{attrs:{title:"Oprations",headStyle:{padding:"0 24px 0 24px"},bodyStyle:{padding:"5px 20px 5px 15px"}}},[n("a-row",[n("a-col",{attrs:{span:12,offset:"4"}},[n("a-tooltip",{attrs:{placement:"top",title:"单点操作，选中或取消选中一个点",mouseEnterDelay:.4},on:{"":function(t){t.stopPropagation()}}},[n("span",{staticStyle:{fontSize:"18px",fontWeight:"500"}},[t._v("click")])])],1),n("a-col",{attrs:{span:4,offset:"2"}},[n("a-switch",{attrs:{disabled:t.clickDisabled},model:{value:t.visClick,callback:function(e){t.visClick=e},expression:"visClick"}})],1)],1),n("a-row",[n("a-col",{attrs:{span:12,offset:"4"}},[n("a-tooltip",{attrs:{placement:"top",title:"单点操作，拖动一个点",mouseEnterDelay:.4}},[n("span",{staticStyle:{fontSize:"18px",fontWeight:"500"}},[t._v("drag")])])],1),n("a-col",{attrs:{span:4,offset:"2"}},[n("a-switch",{attrs:{disabled:t.dragDisabled},model:{value:t.visDrag,callback:function(e){t.visDrag=e},expression:"visDrag"}})],1)],1),n("a-row",[n("a-col",{attrs:{span:12,offset:"4"}},[n("a-tooltip",{attrs:{placement:"top",title:"单点操作，展示与该点相关联的点",mouseEnterDelay:.4}},[n("span",{staticStyle:{fontSize:"18px",fontWeight:"500"}},[t._v("hover")])])],1),n("a-col",{attrs:{span:4,offset:"2"}},[n("a-switch",{attrs:{disabled:t.mouseoverDisabled},model:{value:t.visMouseover,callback:function(e){t.visMouseover=e},expression:"visMouseover"}})],1)],1),n("a-row",[n("a-col",{attrs:{span:12,offset:"4"}},[n("a-popover",{attrs:{placement:"top",title:"keep last selected nodes ?",mouseEnterDelay:.4}},[n("template",{slot:"content"},[n("a-checkbox",{attrs:{checked:!t.brushKeep},on:{change:function(e){t.brushKeep=!t.brushKeep}}},[t._v("no")]),n("a-checkbox",{attrs:{checked:t.brushKeep},on:{change:function(e){t.brushKeep=!t.brushKeep}}},[t._v("yes")])],1),n("span",{staticStyle:{fontSize:"18px",fontWeight:"500"}},[t._v("brush")])],2)],1),n("a-col",{attrs:{span:4,offset:"2"}},[n("a-switch",{attrs:{disabled:t.brushDisabled},on:{change:function(e){return t.onVisBrush("switch")}},model:{value:t.visBrush,callback:function(e){t.visBrush=e},expression:"visBrush"}})],1)],1),n("a-row",[n("a-col",{attrs:{span:12,offset:"4"}},[n("a-tooltip",{attrs:{placement:"top",title:"多点操作，取消选中多个点",mouseEnterDelay:.4}},[n("span",{staticStyle:{fontSize:"18px",fontWeight:"500"}},[t._v("invert brush")])])],1),n("a-col",{attrs:{span:4,offset:"2"}},[n("a-switch",{attrs:{disabled:t.invertBrushDisabled},on:{change:function(e){return t.onVisInvertBrush("switch")}},model:{value:t.visInvertBrush,callback:function(e){t.visInvertBrush=e},expression:"visInvertBrush"}})],1)],1),n("a-row",[n("a-col",{attrs:{span:12,offset:"4"}},[n("a-tooltip",{attrs:{placement:"top",title:"多点操作，放大、缩小或平移视图",mouseEnterDelay:.4}},[n("span",{staticStyle:{fontSize:"18px",fontWeight:"500"}},[t._v("zoom")])])],1),n("a-col",{attrs:{span:4,offset:"2"}},[n("a-switch",{attrs:{disabled:t.zoomDisabled},model:{value:t.visZoom,callback:function(e){t.visZoom=e},expression:"visZoom"}})],1)],1)],1),n("a-card",{attrs:{title:"Data Fields",headStyle:{padding:"0 24px 0 24px"},bodyStyle:{padding:"5px 10px 5px 10px"}}},[n("a-row",[n("a-col",{attrs:{span:12,offset:"4"}}),n("a-col",{attrs:{span:4,offset:"2"}})],1)],1),n("a-menu",{style:{height:"100%",borderRight:0},attrs:{mode:"inline",defaultSelectedKeys:["1"],defaultOpenKeys:["sub1"],openKeys:t.openKeys,inlineIndent:24},on:{openChange:t.onOpenChange}},[n("a-sub-menu",{key:"sub3"},[n("span",{attrs:{slot:"title"},slot:"title"},[n("a-icon",{attrs:{type:"area-chart"}}),n("span",[t._v("change chart")])],1),n("a-menu-item",{key:"force",on:{click:t.changeChart}},[n("a-icon",{attrs:{type:"deployment-unit"}}),t._v("force\n        ")],1),n("a-menu-item",{key:"scatter",on:{click:t.changeChart}},[n("a-icon",{attrs:{type:"dot-chart"}}),t._v("scatter\n        ")],1),n("a-menu-item",{key:"table",on:{click:t.changeChart}},[n("a-icon",{attrs:{type:"table"}}),t._v("table\n        ")],1)],1)],1)],1),n("a-layout",{staticStyle:{padding:"0 0 0 5px"}},[n("a-layout-content",{style:{background:"#fff",padding:"24px",margin:0}},[n("a-row",[n("a-col",{attrs:{span:20}},[n("a-row",{staticStyle:{padding:"5px 0 5px 0"}},[n("a-col",{attrs:{span:5}},[n("a-badge",{attrs:{count:t.markedVisualData.length,showZero:"",numberStyle:{backgroundColor:"#1890ff"}}},[n("a-button",{on:{click:function(e){t.markedsVisible=!0}}},[n("a-icon",{attrs:{type:"database"}}),t._v("Marked Views\n                ")],1)],1),n("a-button",{on:{click:function(e){t.marked=!t.marked}}},[n("a-icon",{attrs:{type:"book",theme:t.marked?"filled":"outlined"}})],1)],1),n("a-col",{attrs:{span:2}},[n("a-button",{attrs:{shape:"circle",disabled:t.undoDisabled},on:{click:t.viewUndo}},[n("a-icon",{attrs:{type:"undo"}})],1),n("a-button",{staticStyle:{margin:"0 0 0 5px"},attrs:{shape:"circle",disabled:t.redoDisabled},on:{click:t.viewRedo}},[n("a-icon",{attrs:{type:"redo"}})],1)],1),n("a-col",{attrs:{span:8}},t._l(t.colorPalette,(function(e,r){return n("a-tag",{key:r,attrs:{color:e},on:{click:function(e){return t.groupTheSelectedNodes(r)}}},[t._v(t._s(r))])})),1),n("a-col",{attrs:{span:4}},[n("a-button",{style:{marginLeft:"0",width:"70px"},attrs:{type:"primary",size:"small"},on:{click:t.viewFilter}},[t._v("filter")])],1),n("a-col",{attrs:{span:5}},[n("a-icon",{attrs:{type:"tags"}}),n("span",[t._v("showIds")]),n("a-switch",{attrs:{disabled:t.showIdsDisabled},model:{value:t.visShowIds,callback:function(e){t.visShowIds=e},expression:"visShowIds"}})],1)],1),n("keep-alive",[n(t.currentChart,{ref:"theView",tag:"component",attrs:{visClick:t.visClick,visBrush:t.visBrush,brushKeep:t.brushKeep,visInvertBrush:t.visInvertBrush,visDrag:t.visDrag,visMouseover:t.visMouseover,visZoom:t.visZoom,visShowIds:t.visShowIds}})],1)],1),n("a-col",{attrs:{span:4}},[t._v("\n          a-col-4\n        ")])],1)],1)],1),n("a-drawer",{attrs:{title:"Marked Views",placement:"right",width:720,closable:!1,visible:t.markedsVisible},on:{close:function(e){t.markedsVisible=!1}}},[n("MarkedViews")],1)],1)},I=[],z=(n("e697"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ForceChart"},[n("div",{staticClass:"chart",style:{width:t.width+"px",height:t.height+"px"},on:{mousewheel:function(t){t.preventDefault()}}})])}),B=[],F=n("5c3d"),V=n.n(F);n("0b47");function $(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function M(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var G={name:"ForceChart",props:{visClick:Boolean,visBrush:Boolean,brushKeep:Boolean,visInvertBrush:Boolean,visDrag:Boolean,visMouseover:Boolean,visZoom:Boolean,visShowIds:Boolean},data:function(){return{chart:{},option:{},isDraging:!1,mousePoint:[]}},computed:M({},Object(s["c"])({visualData:function(t){return t.data.visualData},width:function(t){return.6*t.view.dpiX},height:function(t){return.7*t.view.dpiY},colorPalette:function(t){return t.view.colorPalette},backgroundColor:function(t){return t.view.backgroundColor},contrastColor:function(t){return t.view.contrastColor},parentUUID:function(t){return t.view.parentUUID},currentUUID:function(t){return t.view.currentUUID},needUpdate:function(t){return t.view.chartsNeedUpdate.force},currentOperations:function(t){return t.analyze.currentOperations},rollbacked:function(t){return t.analyze.rollbacked}}),{},Object(s["b"])(["nodes","links","nodesNumber","linksNumber","generateUUID","beforeEvent"])),created:function(){},mounted:function(){console.log("ForceChart",this),this.chart=V.a.init(document.querySelector(".chart")),this.option={backgroundColor:this.backgroundColor,tooltip:{},series:[{type:"graphGL",nodes:this.nodes,edges:this.links,itemStyle:{color:this.contrastColor},lineStyle:{color:this.contrastColor,width:1},forceAtlas2:{steps:5,jitterTolerence:10,edgeWeightInfluence:4}}]},this.$nextTick((function(){}))},updated:function(){},activated:function(){this.needUpdate&&(this.chart.setOption(this.option,!0),this.render(),D.commit("ForceUpdated"))},deactivated:function(){},methods:{render:function(){console.log("render")},ticked:function(){},tickEnd:function(){},brushStart:function(){},brushed:function(){},brushEnd:function(){},invertBrushEnd:function(){},dragstarted:function(t){},dragged:function(t){},dragended:function(t,e,n){},d3_clickSelect:function(t,e,n){},clickSelect:function(t){},mouseover:function(t){},mouseout:function(){},test:function(){}},watch:{}},L=G,R=(n("63f8"),Object(E["a"])(L,z,B,!1,null,null,null)),K=R.exports,W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ScatterChart",style:{margin:"5px",height:t.chartHeight+5+"px",width:t.chartWidth+5+400+"px"}},[n("div",{staticStyle:{float:"left"}},[n("svg",{style:{border:"1px solid #305dff",background:t.backgroundColor},attrs:{width:t.chartWidth,height:t.chartHeight}},[n("defs",[n("filter",{attrs:{id:"shadow"}},[n("feDropShadow",{attrs:{dx:"0",dy:"0",stdDeviation:"0.3"}})],1)])])]),n("div",{style:{float:"left",height:t.chartHeight+"px",margin:"0 5px",padding:"0 0 40px 0"}},[n("a-select",{staticStyle:{width:"160px"},attrs:{showSearch:"",placeholder:"Select X Field",optionFilterProp:"children",filterOption:t.filterOption},on:{change:t.xDimensionChange}},t._l(t.nodeFields,(function(e){return n("a-select-option",{key:e},[t._v(t._s(e))])})),1),n("a-select",{staticStyle:{width:"160px"},attrs:{showSearch:"",placeholder:"Select Y Field",optionFilterProp:"children",filterOption:t.filterOption},on:{change:t.yDimensionChange}},t._l(t.nodeFields,(function(e){return n("a-select-option",{key:e},[t._v(t._s(e))])})),1)],1)])},H=[];n("5490");function Y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var X={name:"ScatterChart",props:{visClick:Boolean,visBrush:Boolean,visInvertBrush:Boolean,visDrag:Boolean,visMouseover:Boolean,visZoom:Boolean,visShowIds:Boolean},data:function(){return{axisMargin:50,xDimension:"",yDimension:"",node:j["selectAll"](),nodeG:j["selectAll"](),vis:j["selectAll"](),xAxis:j["selectAll"](),yAxis:j["selectAll"](),xScale:{},yScale:{},brush:{},invertBrush:{},brushG:j["selectAll"](),invertBrushG:j["selectAll"](),brushedNodes:j["selectAll"](),invertBrushedNodes:j["selectAll"](),opacityNodes:j["selectAll"](),opacityLinks:j["selectAll"](),opacityTexts:j["selectAll"](),text:j["selectAll"](),textG:j["selectAll"](),isDraging:!1,mousePoint:[]}},computed:Z({},Object(s["c"])({sourceData:function(t){return t.data.sourceData},visualData:function(t){return t.data.visualData},chartWidth:function(t){return.7*t.view.dpiX},chartHeight:function(t){return.7*t.view.dpiY},colorPalette:function(t){return t.view.colorPalette},backgroundColor:function(t){return t.view.backgroundColor},parentUUID:function(t){return t.view.parentUUID},currentUUID:function(t){return t.view.currentUUID},needUpdate:function(t){return t.view.chartsNeedUpdate.scatter},currentOperations:function(t){return t.analyze.currentOperations}}),{},Object(s["b"])(["nodes","links","nodesNumber","nodeFields","generateUUID"]),{xDimensionData:function(){var t=this;return this.nodes.map((function(e){return e[t.xDimension]})).sort((function(t,e){return isNaN(t)||isNaN(e)?t>e?1:-1:t-e}))},yDimensionData:function(){var t=this;return this.nodes.map((function(e){return e[t.yDimension]})).sort((function(t,e){return isNaN(t)||isNaN(e)?t>e?1:-1:t-e}))}}),mounted:function(){var t=this;console.log(this),console.log(j);var e=j["select"](this.$el).select("svg").attr("viewBox",[0,0,this.chartWidth,this.chartHeight]);function n(){if(t.visZoom){var e=j["event"].transform.translate(t.axisMargin,t.axisMargin);t.vis.attr("transform",e)}}function r(){if(t.visZoom){var e=j["event"].transform.translate(t.axisMargin,t.axisMargin),n=e.invert([0,0]),r=e.invert([t.chartWidth,t.chartHeight]),i=t.node.filter((function(t){return n[0]<=t.xx&&n[1]<=t.yy&&t.xx<=r[0]&&t.yy<=r[1]}));i.each((function(t){t.attentionTimes+=1}));var a={action:"zoom",nodes:i.nodes(),time:new Date};t.$store.commit("addOperation",a),t.$store.commit("addCurrentOperations",a),console.log("zoom",i.nodes())}}this.vis=e.append("g").attr("transform","translate("+this.axisMargin+","+this.axisMargin+")"),e.call(j["zoom"]().translateExtent([[-this.axisMargin,-this.axisMargin],[1/0,1/0]]).on("zoom",n).on("end",r)).on("dblclick.zoom",null),this.xAxis=this.vis.append("g"),this.yAxis=this.vis.append("g"),this.brush=j["brush"]().extent([[0,0],[this.chartWidth,this.chartHeight]]).on("start brush",this.brushed).on("end",this.brushEnd),this.brushG=e.append("g").call(this.brush).attr("class","brush"),this.visBrush?this.brushG.style("display","inline"):this.brushG.style("display","none"),this.invertBrush=j["brush"]().extent([[0,0],[this.chartWidth,this.chartHeight]]).on("start brush",this.brushed).on("end",this.invertBrushEnd),this.invertBrushG=e.append("g").call(this.invertBrush).attr("class","invertBrush"),this.visInvertBrush?this.invertBrushG.style("display","inline"):this.invertBrushG.style("display","none"),this.linkG=this.vis.append("g").attr("class","links"),this.nodeG=this.vis.append("g").attr("class","nodes"),this.textG=this.vis.append("g").attr("class","texts"),this.visShowIds?this.textG.style("display","inline"):this.textG.style("display","none")},activated:function(){this.needUpdate&&(this.update(),D.commit("ScatterUpdated"))},methods:{update:function(){var t=this,e=this,n=function(e){return e.group?t.colorPalette[e.group]:t.colorPalette[8]},r=this.xDimensionData.length||0;this.xScale=j["scaleOrdinal"]().domain(this.xDimensionData).range(j["range"](r).map((function(t){return t*e.chartWidth/r}))),this.xAxis.call(j["axisTop"](this.xScale));var i=this.yDimensionData.length||0;this.yScale=j["scaleOrdinal"]().domain(this.yDimensionData).range(j["range"](i).map((function(e){return e*+t.chartHeight/i}))),this.yAxis.call(j["axisLeft"](this.yScale)),this.link=this.linkG.selectAll("line").data(this.links).join("line"),this.node=this.nodeG.selectAll("circle").data(this.nodes).join("circle").attr("r",(function(t){return Math.sqrt(t.size)/10||4.5})).attr("class","display").attr("fill",n).attr("filter","url(#shadow)").attr("cx",(function(e){return e.xx=t.xScale(e[t.xDimension]),e.xx})).attr("cy",(function(e){return e.yy=t.yScale(e[t.yDimension]),e.yy})).classed("selected",(function(t){return t.selected})),this.text=this.textG.selectAll("text").data(this.node.data()).join("text").attr("text-anchor","middle").attr("font-family","Avenir").attr("font-size","10").attr("dy","-0.5em").text((function(t){return t.id})).attr("fill",n).attr("x",(function(t){return t.xx})).attr("y",(function(t){return t.yy})).style("-webkit-user-select","none").style("-moz-user-select","none").style("-ms-user-select","none").style("user-select","none"),this.bindEvents()},bindEvents:function(){this.node.on("click",this.clickSelect),this.node.on("mouseover",this.mouseover),this.node.on("mouseout",this.mouseout);var t=this.node;function e(e){var n=e.index,r=t.filter((function(t){return t.index===n}));r.dispatch(j["event"].type)}this.text.on("click",e),this.text.on("mouseover",e),this.text.on("mouseout",e)},brushed:function(){if(null!==j["event"].selection){var t=this.visTransform().translate(this.axisMargin,this.axisMargin),e=j["event"].selection,n=t.invert(e[0]),r=t.invert(e[1]);j["event"].type;var i=this.visBrush?"brushing":"invertBrushing";this.node.classed(i,(function(t){return n[0]<=t.xx&&n[1]<=t.yy&&t.xx<=r[0]&&t.yy<=r[1]}))}},brushEnd:function(){if(null!==j["event"].selection){this.brushedNodes=this.nodeG.selectAll(".brushing"),this.brushedNodes.classed("brushing",!1).classed("selected",!0).each((function(t){t.selected=!0})),this.brushedNodes.each((function(t){t.attentionTimes+=1}));var t={action:"brush",nodes:this.brushedNodes.nodes(),time:new Date};this.$store.commit("addOperation",t),this.$store.commit("addCurrentOperations",t),console.log("brushEnd",this.brushedNodes.nodes())}},invertBrushEnd:function(){this.invertBrushedNodes=this.nodeG.selectAll(".invertBrushing"),this.invertBrushedNodes.classed("invertBrushing",!1).classed("selected",!1).each((function(t){t.selected=!1}));var t={action:"invertBrush",nodes:this.invertBrushedNodes.nodes(),time:new Date};this.$store.commit("addOperation",t),this.$store.commit("addCurrentOperations",t),console.log("invertBrushEnd",this.invertBrushedNodes.nodes())},dragstarted:function(t){this.visDrag&&(this.mousePoint=[j["event"].x,j["event"].y])},dragged:function(t,e,n){this.visDrag&&(t.xx=j["event"].x,t.yy=j["event"].y,j["select"](n[e]).attr("cx",t.xx).attr("cy",t.yy),this.isDraging||this.mousePoint[0]===j["event"].x&&this.mousePoint[1]===j["event"].y||(this.isDraging=!0))},dragended:function(t,e,n){if(this.visDrag&&this.isDraging){t.attentionTimes+=1;var r=j["select"](n[e]),i={action:"drag",nodes:r.nodes(),time:new Date};this.$store.commit("addOperation",i),this.$store.commit("addCurrentOperations",i),this.isDraging=!1,console.log("drag",r.nodes())}},clickSelect:function(t,e,n){if(this.visClick){var r=j["select"](n[e]);if(r.classed("selected"))r.classed("selected",!1),t.selected=!1;else{r.classed("selected",!0),t.selected=!0,t.attentionTimes+=1;var i={action:"click",nodes:r.nodes(),time:new Date};this.$store.commit("addOperation",i),this.$store.commit("addCurrentOperations",i),console.log("click",r.nodes())}}},mouseover:function(t){if(this.visMouseover){var e=null,n=null,r=t.id;this.opacityLinks=this.link.filter((function(t){return t.source.id!==r&&t.target.id!==r})),n=this.link.filter((function(t){return t.source.id===r||t.target.id===r})),this.opacityNodes=this.node.filter((function(t){var e=n.data();for(var r in e)if(t.id===e[r].source.id||t.id===e[r].target.id)return!1;return!0})),e=this.node.filter((function(t){var e=n.data();for(var r in e)if(t.id===e[r].source.id||t.id===e[r].target.id)return!0;return!1}));var i=this.opacityNodes.data().map((function(t){return t.index}));if(this.opacityTexts=this.text.filter((function(t){return void 0!==i.find((function(e){return e===t.index}))}//!==undefined 防止返回0误认为false
)),this.opacityNodes.transition().style("fill-opacity",.2).style("stroke-opacity",.2),this.opacityLinks.transition().style("stroke-opacity",0),this.opacityTexts.transition().style("fill-opacity",0),!this.isDraging){t.attentionTimes+=1;var a={action:"mouseover",nodes:e.nodes(),time:new Date};this.$store.commit("addOperation",a),this.$store.commit("addCurrentOperations",a),console.log("mouseover",e.nodes())}}},mouseout:function(){this.visMouseover&&(this.opacityNodes.transition().delay(200).style("fill-opacity",null).style("stroke-opacity",null),this.opacityLinks.transition().delay(200).style("stroke-opacity",null),this.opacityTexts.transition().delay(200).style("fill-opacity",null))},filterOption:function(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0},visTransform:function(){return j["zoomTransform"](this.vis.node())},xAxisTransform:function(){return j["zoomTransform"](this.xAxis.node())},yAxisTransform:function(){return j["zoomTransform"](this.yAxis.node())},xDimensionChange:function(t){this.xDimension=t,this.update()},yDimensionChange:function(t){this.yDimension=t,this.update()},test:function(){this.update()}},watch:{visBrush:function(t){t?(this.brushG.style("display","inline"),this.brush.clear(this.brushG)):this.brushG.style("display","none")},visInvertBrush:function(t){t?(this.invertBrushG.style("display","inline"),this.invertBrush.clear(this.invertBrushG)):this.invertBrushG.style("display","none")},visShowIds:function(t){t?this.textG.style("display","inline"):this.textG.style("display","none")}}},q=X,J=(n("86d6"),Object(E["a"])(q,W,H,!1,null,null,null)),Q=J.exports,tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-table",{attrs:{columns:t.columns,dataSource:t.data,size:"small"}})},et=[];n("2b45");function nt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function rt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nt(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var it={name:"NodesTable",props:{visClick:Boolean,visBrush:Boolean,visInvertBrush:Boolean,visDrag:Boolean,visMouseover:Boolean,visZoom:Boolean,visShowIds:Boolean},data:function(){return{chartWidth:"960",chartHeight:"600"}},computed:rt({},Object(s["c"])({sourceData:function(t){return t.data.sourceData},visualData:function(t){return t.data.visualData},colorPalette:function(t){return t.view.colorPalette},backgroundColor:function(t){return t.view.backgroundColor},needUpdate:function(t){return t.view.chartsNeedUpdate.table}}),{},Object(s["b"])(["nodes","links","nodesNumber","nodeFields"]),{degreeArray:function(){var t=this.simulation.nodes(),e=this.simulation.force("link").links(),n=t.length,r=(e.length,new Array(n)),i=!0,a=!1,o=void 0;try{for(var s,c=e[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var l=s.value;r[l.source.index]=(r[l.source.index]||0)+1,r[l.target.index]=(r[l.target.index]||0)+1}}catch(u){a=!0,o=u}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}return r},columns:function(){return this.nodeFields.map((function(t){return{title:t,dataIndex:t,key:t,sorter:function(e,n){return isNaN(e[t])||isNaN(n[t])?e[t]>n[t]?1:-1:e[t]-n[t]}}}))},data:function(){var t=this;return this.nodes.map((function(e,n){var r={key:n},i=!0,a=!1,o=void 0;try{for(var s,c=t.nodeFields[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var l=s.value;r[l]=void 0===e[l]||null===e[l]?"-":e[l].toString()}}catch(u){a=!0,o=u}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}return r}))}}),mounted:function(){},activated:function(){},deactivated:function(){},methods:{},watch:{needUpdate:function(t){t&&D.commit("TableUpdated")}}},at=it,ot=Object(E["a"])(at,tt,et,!1,null,null,null),st=ot.exports,ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"MarkedViews"},[n("a-card",t._l(t.markedVisualData,(function(e){return n("a-card-grid",{key:e.uuid},[n("StaticForce",{attrs:{width:t.width,height:t.height-t.optionsHeight,nodes:e.nodes,links:e.links}}),n("a-row",[n("a-col",{staticStyle:{"vertical-align":"middle"},attrs:{span:3}},[n("p",[t._v("uuid: "+t._s(e.uuid))])]),n("a-col",{attrs:{span:6,offset:5}},[n("a-button",{attrs:{disabled:e.uuid===t.currentUUID},on:{click:function(n){return t.rollback(e)}}},[t._v("rollback")])],1),n("a-col",{attrs:{span:6,offset:0}},[n("a-button",{attrs:{type:"danger"},on:{click:function(n){return t.deleteMarked(e)}}},[t._v("delete")])],1)],1)],1)})),1)],1)},lt=[],ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"StaticForce",staticStyle:{float:"left"}},[n("svg",{style:{border:"1px solid #305dff",background:t.backgroundColor},attrs:{width:t.width,height:t.height}},[n("defs",[n("filter",{attrs:{id:"shadow"}},[n("feDropShadow",{attrs:{dx:"0",dy:"0",stdDeviation:"0.3"}})],1)]),n("g",[n("g",{staticClass:"links"},t._l(t.links,(function(t){return n("line",{key:t.uid,attrs:{x1:t.source.x,y1:t.source.y,x2:t.target.x,y2:t.target.y}})})),0),n("g",{staticClass:"nodes"},t._l(t.nodes,(function(e){return n("circle",{key:e.uid,class:{display:!0,selected:e.selected},attrs:{r:Math.max(Math.sqrt(!!e.size)/10,4.5),fill:t.colorPalette[e.group||0],filter:"url(#shadow)",cx:e.x,cy:e.y}})})),0)])])])},dt=[];n("163d");function ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ft(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ht(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var pt={name:"StaticForce",props:{nodes:{},links:{},width:{type:Number,required:!0},height:{type:Number,required:!0}},data:function(){return{linkG:j["selectAll"](),nodeG:j["selectAll"](),vis:j["selectAll"](),mousePoint:[]}},computed:ft({},Object(s["c"])({backgroundColor:function(t){return t.view.backgroundColor},colorPalette:function(t){return t.view.colorPalette}}),{},Object(s["b"])(["layoutRange"])),mounted:function(){console.log("StaticForce",this);var t=this,e=j["select"](this.$el).select("svg").attr("viewBox",[0,0,this.width,this.height]);this.width,this.height;function n(){var e=j["event"].transform;t.vis.attr("transform",e)}this.vis=e.select("g"),e.call(j["zoom"]().on("zoom",n)).on("dblclick.zoom",null),this.linkG=this.vis.select("g.links"),this.nodeG=this.vis.select("g.nodes"),this.nodes.length&&this.adjustTransform()},activated:function(){},deactivated:function(){},methods:{render:function(){},adjustTransform:function(){var t=this.layoutRange(this.nodes,["y","x","y","x"]),e=this.visTransform(),n=t[1]-t[3],r=t[2]-t[0],i=.8*Math.min(this.width/n,this.height/r),a=[this.width/2,this.height/2],o=[n/2+t[3],r/2+t[0]],s=a[0]-o[0]*i,c=a[1]-o[1]*i;e.x=s,e.y=c,e.k=i,this.vis.attr("transform",e)},visTransform:function(){return j["zoomTransform"](this.vis.node())}},watch:{nodes:function(){this.adjustTransform()}}},yt=pt,vt=(n("2633"),Object(E["a"])(yt,ut,dt,!1,null,null,null)),bt=vt.exports;function mt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function gt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mt(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ot={name:"MarkedViews",components:{StaticForce:bt},data:function(){return{width:634,height:380,optionsHeight:30}},computed:gt({},Object(s["c"])({visualData:function(t){return t.data.visualData},currentUUID:function(t){return t.view.currentUUID},recordset:function(t){return t.analyze.recordset},recordData:function(t){return t.analyze.recordData}}),{},Object(s["b"])(["savedViewData","generateUUID","markedVisualData","beforeEvent"])),methods:{rollback:function(t){this.beforeEvent("rollback",this,t),console.log("rollback")},deleteMarked:function(t){t.marked=!1}}},wt=Ot,kt=(n("0414"),Object(E["a"])(wt,ct,lt,!1,null,null,null)),xt=kt.exports;function Dt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function jt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Dt(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Pt={name:"PageView",components:{ForceChart:K,ScatterChart:Q,NodesTable:st,MarkedViews:xt},data:function(){return{collapsed:!1,rootSubmenuKeys:["sub1","sub2","sub3"],openKeys:["sub1"],visClick:!1,visDrag:!0,visMouseover:!1,visBrush:!1,brushKeep:!1,visInvertBrush:!1,visZoom:!0,visShowIds:!1,markedsVisible:!1,saveDisabled:!1,clickDisabled:!1,dragDisabled:!1,mouseoverDisabled:!1,brushDisabled:!1,invertBrushDisabled:!1,zoomDisabled:!1,showIdsDisabled:!1,currentChartKey:"force"}},computed:jt({},Object(s["c"])({sourceData:function(t){return t.data.sourceData},visualData:function(t){return t.data.visualData},colorPalette:function(t){return t.view.colorPalette},parentUUID:function(t){return t.view.parentUUID},currentUUID:function(t){return t.view.currentUUID},currentOperations:function(t){return t.analyze.currentOperations},undoList:function(t){return t.analyze.undoList},redoList:function(t){return t.analyze.redoList},rollbacked:function(t){return t.analyze.rollbacked}}),{},Object(s["b"])(["nodes","links","viewSlice","generateUUID","beforeEvent","markedVisualData","tmpExistingViews"]),{marked:{get:function(){return this.tmpExistingViews[this.currentUUID].marked},set:function(t){this.tmpExistingViews[this.currentUUID].marked=t}},currentChart:function(){var t;switch(this.currentChartKey){case"scatter":this.changeDisabledState({drag:!0}),t="ScatterChart";break;case"force":this.changeDisabledState({save:!1}),t="ForceChart";break;case"table":this.changeDisabledState({click:!0,drag:!0,mouseover:!0,brush:!0,invertBrush:!0,zoom:!0,showIds:!0}),t="NodesTable";break;default:this.changeDisabledState();break}return t},undoDisabled:function(){return!this.undoList.length},redoDisabled:function(){return!this.redoList.length}}),mounted:function(){console.log("PageView",this)},methods:{onVisClick:function(){this.visClick=!this.visClick},onVisBrush:function(t){"switch"!==t&&(this.visBrush=!this.visBrush),this.visBrush&&(this.visInvertBrush=!1)},onVisInvertBrush:function(t){"switch"!==t&&(this.visInvertBrush=!this.visInvertBrush),this.visInvertBrush&&(this.visBrush=!1)},onVisDrag:function(){this.visDrag=!this.visDrag},onVisMouseover:function(){this.visMouseover=!this.visMouseover},onVisZoom:function(){this.visZoom=!this.visZoom},onVisShowIds:function(){this.visShowIds=!this.visShowIds},onOpenChange:function(t){var e=this,n=t.find((function(t){return-1===e.openKeys.indexOf(t)}));-1===this.rootSubmenuKeys.indexOf(n)?this.openKeys=t:this.openKeys=n?[n]:[]},changeChart:function(t){this.currentChartKey=t.key},changeDisabledState:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(t.save,t.click),n=void 0!==e&&e,r=t.drag,i=void 0!==r&&r,a=t.mouseover,o=void 0!==a&&a,s=t.brush,c=void 0!==s&&s,l=t.invertBrush,u=void 0!==l&&l,d=t.zoom,h=void 0!==d&&d,f=t.showIds,p=void 0!==f&&f;this.clickDisabled=n,this.dragDisabled=i,this.mouseoverDisabled=o,this.brushDisabled=c,this.invertBrushDisabled=u,this.zoomDisabled=h,this.showIdsDisabled=p},viewUndo:function(){var t=this;this.$store.commit("changeUndoRedo",(function(e,n){e.length&&(t.beforeEvent("undo",t,e.pop()),console.info("undo!"))}))},viewRedo:function(){var t=this;this.$store.commit("changeUndoRedo",(function(e,n){n.length&&(t.beforeEvent("redo",t,n.shift()),console.info("redo!"))}))},viewFilter:function(){var t=this,e=this.viewSlice();e.nodes.length?(e.uuid=this.currentUUID,this.beforeEvent("filter",this),e.nodes.forEach((function(e){t.$set(e,"selected",!1)})),this.$store.commit("updateVisualData",e),this.$store.commit("resetCurrentOperations"),this.$store.commit("addOperation_",{action:"filter",nodes:e,time:new Date}),console.log("filter")):this.$message.error("No nodes are selected !")},groupTheSelectedNodes:function(t){var e=this;this.beforeEvent("classification",this),D.state.data.visualData.nodes.forEach((function(n){n.selected&&e.$set(n,"group",t)}))},test:function(t,e,n){console.log(t),console.log(this.$listeners),console.log(n)},test1:function(t){console.log(t),console.log(t.target)}},watch:{currentUUID:function(t){D.commit("change_uuids",(function(e){e.add(t)}))}}},St=Pt,Ct=Object(E["a"])(St,A,I,!1,null,null,null),_t=Ct.exports,Ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-row",{style:{background:t.backgroundColor}},[n("a-col",{style:{borderRight:"1px dashed "+t.contrastColor},attrs:{span:18}},[n("DataFlow"),n("div",{style:{width:"100%",borderTop:"1px dashed "+t.contrastColor}}),n("TimeOrder")],1),n("a-col",{attrs:{span:6}},[n("keep-alive",[n("StaticForce",{attrs:{width:500,height:500,nodes:t.tooltipNodes,links:t.tooltipLinks}})],1)],1)],1)},Et=[],Tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"TimeOrder"},[n("div",{style:{width:t.width+"px"}},[n("a-row",[n("a-col",{style:{border:"1px solid "+t.contrastColor},attrs:{span:4}},[n("span",{style:{color:t.contrastColor}},[t._v("xAxis : ")]),n("a-select",{staticStyle:{width:"80%"},attrs:{value:t.xDimension,size:"small"},on:{change:t.handleXChange}},t._l(t.dimensions,(function(e){return n("a-select-option",{key:e.name,attrs:{value:e.name}},[t._v("\n            "+t._s(e.name)+"\n            "),n("span",{style:{color:"rgba(0, 0, 0, 0.45)"}},[t._v("type: "+t._s(e.type))])])})),1)],1),n("a-col",{attrs:{span:1}},[n("a-button",{style:{width:"70%",margin:"0 14%"},attrs:{size:"small",ghost:""},on:{click:t.swapXYDimensions}},[n("a-icon",{attrs:{type:"swap"}})],1)],1),n("a-col",{style:{border:"1px solid "+t.contrastColor},attrs:{span:4}},[n("span",{style:{color:t.contrastColor}},[t._v("yAxis : ")]),n("a-select",{staticStyle:{width:"80%"},attrs:{value:t.yDimension,size:"small"},on:{change:t.handleYChange}},t._l(t.dimensions,(function(e){return n("a-select-option",{key:e.name,attrs:{value:e.name}},[t._v("\n            "+t._s(e.name)+"\n            "),n("span",{style:{color:"rgba(0, 0, 0, 0.45)"}},[t._v("type: "+t._s(e.type))])])})),1)],1)],1)],1),n("div",{staticClass:"chart",style:{width:t.width+"px",height:t.height+"px"}})])},Nt=[];function At(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function It(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?At(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):At(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var zt={name:"TimeOrder",data:function(){return{chart:{},option:{},xDimension:"time",yDimension:"operation"}},computed:It({},Object(s["c"])({visualData:function(t){return t.data.visualData},width:function(t){return.7*t.view.dpiX},height:function(t){return.35*(t.view.dpiY-64)},colorPalette:function(t){return t.view.colorPalette},colorPalette2:function(t){return t.view.colorPalette2},backgroundColor:function(t){return t.view.backgroundColor},contrastColor:function(t){return t.view.contrastColor},operationTypes:function(t){return t.view.operationTypes},recordset:function(t){return t.analyze.recordset}}),{},Object(s["b"])(["operations"]),{dimensions:function(){return[{name:"time",type:"time"},{name:"operation",type:"ordinal",data:this.operationTypes},{name:"index",type:"ordinal",data:this.recordset.map((function(t){return t.index}))},{name:"Adjust Layout ? ",type:"ordinal",data:["Yes","No"]},{name:"Switch Layout ? ",type:"ordinal",data:["Yes","No"]}]},chartData:function(){function t(t){var e=["drag","classification","zoom","filter"];return e.includes(t)?"Yes":"No"}function e(t){var e=["undo","redo","rollback"];return e.includes(t)?"Yes":"No"}return this.recordset.map((function(n){var r=n.operation;return[n.time,r,n.index,t(r),e(r)]}))},chartEncode:function(){return{x:this.xDimension,y:this.yDimension,tooltip:this.dimensions.map((function(t){return t.name}))}}}),mounted:function(){var t=this;console.log("TimeOrder",this),this.chart=V.a.init(document.querySelector(".chart"),null,{renderer:"svg"}),console.log("chart",this.chart),this.option={color:this.colorPalette2,backgroundColor:this.backgroundColor,textStyle:{color:this.contrastColor},xAxis:this.xAxis(this.dimensions.find((function(e){return e.name===t.xDimension}))),yAxis:this.yAxis(this.dimensions.find((function(e){return e.name===t.yDimension}))),legend:{orient:"vertical",right:"right",textStyle:{color:this.contrastColor}},tooltip:{},dataZoom:[{type:"inside"},{type:"slider"}],series:this.operationTypes.map((function(e){return{name:e,type:"scatter",dimensions:t.dimensions,data:t.chartData.filter((function(t){return t[1]===e})),encode:t.chartEncode}}))},this.chart.setOption(this.option,!0)},activated:function(){var t=this;this.chart.setOption({series:this.operationTypes.map((function(e){return{name:e,data:t.chartData.filter((function(t){return t[1]===e}))}}))})},methods:{xAxis:function(t){var e={axisLine:{lineStyle:{color:this.contrastColor}},axisTick:{alignWithLabel:!0,lineStyle:{color:this.contrastColor}},axisLabel:{textStyle:{color:this.contrastColor}},splitLine:{show:!1}};return this.handleAxisType(t,e)},yAxis:function(t){var e={axisLine:{lineStyle:{color:this.contrastColor}},axisTick:{alignWithLabel:!0,lineStyle:{color:this.contrastColor}},axisLabel:{align:"right",textStyle:{color:this.contrastColor}},splitLine:{show:!1}};return this.handleAxisType(t,e)},handleAxisType:function(t,e){var n=t.type;switch(n){case"time":Object.assign(e,{type:n});break;case"ordinal":Object.assign(e,{data:t.data,type:"category"});break;case"value":Object.assign(e,{type:n});break;case"log":Object.assign(e,{type:n});break;default:alert("type error");break}return e},handleXChange:function(t){var e=this;this.xDimension=t;var n=this.dimensions.find((function(e){return e.name===t}));this.chart.setOption({series:this.operationTypes.map((function(t){return{name:t,encode:e.chartEncode}})),xAxis:this.xAxis(n)})},handleYChange:function(t){var e=this;this.yDimension=t;var n=this.dimensions.find((function(e){return e.name===t}));this.chart.setOption({series:this.operationTypes.map((function(t){return{name:t,encode:e.chartEncode}})),yAxis:this.yAxis(n)})},swapXYDimensions:function(){var t=this,e=this.xDimension;this.xDimension=this.yDimension,this.yDimension=e,this.chart.setOption({series:this.operationTypes.map((function(e){return{name:e,encode:t.chartEncode}})),xAxis:this.xAxis(this.dimensions.find((function(e){return e.name===t.xDimension}))),yAxis:this.yAxis(this.dimensions.find((function(e){return e.name===t.yDimension})))})}},watch:{}},Bt=zt,Ft=Object(E["a"])(Bt,Tt,Nt,!1,null,null,null),Vt=Ft.exports,$t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"DataFlow",style:{width:t.width+"px",height:t.height+"px"}},[n("svg",{attrs:{width:t.width,height:t.height}},[n("defs",[n("filter",{attrs:{id:"shadow"}},[n("feDropShadow",{attrs:{dx:"0",dy:"0",stdDeviation:"0.3"}})],1)]),n("g",[n("circle",{style:{fill:"none",strokeWidth:"10",stroke:"#1890ff"},attrs:{cx:t.currentNode.x0,cy:(t.currentNode.y0+t.currentNode.y1)/2,r:t.markCircleR}}),n("g",{staticClass:"nodes",attrs:{stroke:"#000"}},t._l(t.nodes,(function(e){return n("g",{key:e.data.uuid,attrs:{transform:"translate("+e.x0+",0)"},on:{click:function(n){return t.updateTooltip(e.data)}}},[e.data.marked?n("g",{attrs:{transform:"translate(0,"+(e.y0+e.y1)/2+")"}},[n("path",{attrs:{d:t.markedSymbol("star",180),stroke:"#1890ff","stroke-width":"2"}})]):t._e(),n("g",{attrs:{transform:"translate("+-t.markCircleR+","+((e.y0+e.y1)/2-t.markCircleR)+")",opacity:e.isShortestPath?1:.3}},[n("ChartPie",{attrs:{nodes:t.createPieData(e),radius:t.markCircleR,valueFn:function(t){return t.nodesNum}}})],1)])})),0),n("g",{staticClass:"links",attrs:{fill:"none"}},t._l(t.links,(function(e){return n("g",{key:e.index},[n("path",{attrs:{d:t.generatePath(e),stroke:t.pathColor(e.operation),"stroke-width":e.width,"stroke-opacity":e.isShortestPath?.7:.2}}),n("title",[t._v(t._s(e.operation))]),n("g",{attrs:{transform:"translate("+(e.x1+(e.x1>e.x0?-15-t.markCircleR:20))+","+e.y1+")"}},[n("path",{attrs:{d:t.markedSymbol("triangle",180),stroke:t.pathColor(e.operation),"stroke-width":"2",fill:t.pathColor(e.operation),opacity:e.isShortestPath?.7:.2,transform:"rotate("+(e.x1>e.x0?-30:30)+")"}})])])})),0),n("g",{staticClass:"texts",staticStyle:{font:"10px sans-serif"}},t._l(t.nodes,(function(e){return n("text",{key:e.data.uuid,attrs:{x:e.x1+6,y:(e.y0+e.y1)/2-t.markCircleR,dx:"-0.35em","text-anchor":"start"}},[t._v(t._s(e.data.uuid))])})),0)])])])},Mt=[],Gt=n("6af9"),Lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:2*this.radius,height:2*this.radius}},[n("g",{attrs:{transform:"translate("+this.radius+","+this.radius+")"}},t._l(t.arcs,(function(e){return n("path",{key:e.index,attrs:{d:t.generateArc(e.startAngle,e.endAngle),fill:t.fillColor(e.data.group),"stroke-width":"0",opacity:"null"===e.data.group?0:1}},[n("title",[t._v(t._s(e.data.id))])])})),0)])},Rt=[];function Kt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Wt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Kt(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ht={name:"ChartPie",props:{nodes:Array,radius:Number,valueFn:Function},data:function(){return{arcs:[],arcGenerator:{},pieGenerator:{}}},computed:Wt({},Object(s["c"])({colorPalette:function(t){return t.view.colorPalette}})),created:function(){this.arcGenerator=j["arc"]().innerRadius(.67*this.radius).outerRadius(this.radius),this.pieGenerator=j["pie"]().padAngle(.05).value(this.valueFn),this.arcs=this.pieGenerator(this.nodes)},mounted:function(){},methods:{generateArc:function(t,e){return this.arcGenerator({startAngle:t,endAngle:e})},fillColor:function(t){return"null"===t?"null":this.colorPalette[t]},testFn:function(){}}},Yt=Ht,Zt=Object(E["a"])(Yt,Lt,Rt,!1,null,null,null),Xt=Zt.exports;function qt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Jt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?qt(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Qt={name:"DataFlow",components:{ChartPie:Xt},data:function(){return{link:j["selectAll"](),node:j["selectAll"](),nodeWidth:45,linkWidth:8,markCircleR:50,vis:j["selectAll"](),linkG:j["selectAll"](),nodeG:j["selectAll"](),textG:j["selectAll"](),sankey:{},nodesUpdater:0}},computed:Jt({},Object(s["c"])({visualData:function(t){return t.data.visualData},nodesTotalNum:function(t){return t.data.nodesTotalNum},width:function(t){return.7*t.view.dpiX},height:function(t){return.45*(t.view.dpiY-64)},colorPalette:function(t){return t.view.colorPalette},colorPalette2:function(t){return t.view.colorPalette2},backgroundColor:function(t){return t.view.backgroundColor},contrastColor:function(t){return t.view.contrastColor},operationTypes:function(t){return t.view.operationTypes},currentUUID:function(t){return t.view.currentUUID},operations:function(t){return t.analyze.operations},recordset:function(t){return t.analyze.recordset}}),{},Object(s["b"])(["recordFlow","dijkstra"]),{graph:function(){return this.sankey(this.recordFlow)},nodes:function(){this.nodesUpdater;var t=this.graph.nodes;return t.forEach((function(t){t.sourceLinks=[],t.targetLinks=[]})),t},nodesNum:function(){return this.recordFlow.nodes.length},nodesDict:function(){var t={};return this.nodes.forEach((function(e){t[e.data.uuid]=e})),t},links:function(){var t=this,e=[],n=[].concat(Object(g["a"])(this.recordset),[this.currentNode]),r={};this.nodes.forEach((function(t){r[t.data.uuid]=t}));for(var i=new Array(this.nodesNum),a=0;a<this.nodesNum;a++)i[a]=new Array(this.nodesNum).fill(1/0);for(var o=this.nodes.map((function(t){return t.data.uuid})),s=1;s<n.length;s++){var c={index:s-1,operation:n[s-1].operation,source:r[n[s-1].data.uuid],target:r[n[s].data.uuid],width:this.linkWidth,x0:0,y0:0,x1:0,y1:0,isShortestPath:!1},l=c.target.x0>c.source.x0;c.x0=l?c.source.x1:c.source.x0,c.x1=l?c.target.x0:c.target.x1,e.push(c),r[n[s-1].data.uuid].sourceLinks.push(c),r[n[s].data.uuid].targetLinks.push(c),i[o.indexOf(n[s-1].data.uuid)][o.indexOf(n[s].data.uuid)]=1}this.nodes.forEach((function(e){e.isShortestPath=!1;for(var n=2*t.markCircleR,r=e.sourceLinks,i=0;i<r.length;i++){var a=(e.y0+e.y1)/2-t.markCircleR;r[i].y0=a+n*(i+1)/(r.length+1)}for(var o=e.targetLinks,s=0;s<o.length;s++){var c=(e.y0+e.y1)/2-t.markCircleR;o[s].y1=c+n*(s+1)/(o.length+1)}}));var u=this.dijkstra(i,o.indexOf("root")),d=o.indexOf(this.currentNode.data.uuid),h=[].concat(Object(g["a"])(u[d].path),[d]),f=h.map((function(t){return o[t]}));console.log("matrix",i),console.log("pathIndex",h),console.log("".concat(o.indexOf("root")," to ").concat(d));for(var p=function(e){if(t.nodesDict[f[e]].isShortestPath=!0,!e)return"continue";var n=r[f[e-1]].sourceLinks.find((function(t){return t.target.data.uuid===f[e]}));n.isShortestPath=!0},y=0;y<f.length;y++)p(y);return this.nodesUpdater++,e},currentNode:function(){var t=this;return this.nodes.find((function(e){return e.data.uuid===t.currentUUID}))}}),created:function(){this.sankey=Gt["a"]().nodeAlign(Gt["b"]).nodeId((function(t){return t.data.uuid})).nodeWidth(this.nodeWidth).nodePadding(60).extent([[1,5],[this.width-1,this.height-5]])},mounted:function(){var t=this;console.log("DataFlow",this);var e=j["select"](this.$el).select("svg").attr("viewBox",[0,0,this.width,this.height]);this.vis=e.select("g"),e.call(j["zoom"]().extent([[0,0],[this.width,this.height]]).on("zoom",(function(){var e=j["event"].transform;t.vis.attr("transform",e)}))).on("dblclick.zoom",null),this.$nextTick((function(){this.nodeG=this.vis.select("g.nodes"),this.linkG=this.vis.select("g.links"),this.textG=this.vis.select("g.texts")}))},activated:function(){},methods:{update:function(){console.log("recordFlow:",this.recordFlow)},generatePath:function(t){var e=this,n=t.target.x0>t.source.x0,r=21.87;return n?j["linkHorizontal"]().source((function(){return[t.source.x0+e.markCircleR,t.y0]})).target((function(){return[t.target.x0-e.markCircleR-r,t.y1]}))():j["linkHorizontal"]().source((function(){return[t.source.x0-e.markCircleR,t.y0]})).target((function(){return[t.target.x0+e.markCircleR+r,t.y1]}))()},pathColor:function(t){return this.colorPalette2[this.operationTypes.indexOf(t)]},createPieData:function(t){var e=t.data.nodes,n={};e.forEach((function(t){t.group?void 0===n[t.group+""]?n[t.group+""]=1:n[t.group+""]++:void 0===n["0"]?n["0"]=1:n["0"]++}));var r=[],i=Object.keys(n).sort();i.forEach((function(t){r.push({group:t,nodesNum:n[t]})}));var a=this.nodesTotalNum-e.length;return a>0&&r.push({group:"null",nodesNum:a}),r},createMultipleColorRects:function(t){var e=t.y1-t.y0,n=t.data.nodes,r=n.length,i={};n.forEach((function(t){t.group?void 0===i[t.group+""]?i[t.group+""]=1:i[t.group+""]++:void 0===i["0"]?i["0"]=1:i["0"]++}));var a=[],o=Object.keys(i).sort(),s=0;return o.forEach((function(n){var o=e*i[n]/r;a.push({group:n,nodesNum:i[n],y:t.y0+s,height:o}),s+=o})),a},createMultipleColorsRect__:function(t,e,n){var r=this,i=t.y1-t.y0,a=t.x1-t.x0,o=t.data.nodes,s=t.data.nodes.length,c={};o.forEach((function(t){t.group?void 0===c[t.group+""]?c[t.group+""]=0:c[t.group+""]++:void 0===c["0"]?c["0"]=0:c["0"]++}));var l=Object.keys(c).sort(),u=j["select"](n[e]),d=0;l.forEach((function(e){var n=i*c[e]/s;u.append("rect").attr("fill",r.colorPalette[e]).attr("x",t.x0).attr("y",t.y0+d).attr("width",a).attr("height",n),d+=n})),u.on("click",(function(){r.updateTooltip(t.data)}))},dataFlowShowOperations:function(){var t=this,e=(!(arguments.length>0&&void 0!==arguments[0])||arguments[0],10);this.link.each((function(n,r,i){var a=n.operations.map((function(t){return t.action})),o=a.length;if(o){j["select"](i[r]).select("path").remove();var s=[n.source.x1,(n.source.y0+n.source.y1)/2],c=[n.target.x0,n.y1],l=[(c[0]-s[0])/(o+1),(c[1]-s[1])/(o+1)],u=new Array(o+1).fill({}),d=j["select"](i[r]).selectAll("path").data(u).join("path").attr("d",(function(t,e){return j["linkHorizontal"]().source((function(t){return[s[0]+e*l[0],s[1]+e*l[1]]})).target((function(t){return[s[0]+(e+1)*l[0],s[1]+(e+1)*l[1]]}))()})).attr("stroke","#aaa").attr("stroke-width",5);console.log(d);var h=j["select"](i[r]).attr("class","linkLink").selectAll("circle").data(a).join("circle").attr("cx",(function(t,e){return s[0]+(e+1)*l[0]})).attr("cy",(function(t,e){return s[1]+(e+1)*l[1]})).attr("r",e).attr("fill",(function(e){return t.colorPalette[t.operationTypes.indexOf(e)]}));h.append("title").text((function(t){return t}))}}))},visTransform:function(){return j["zoomTransform"](this.vis.node())},updateTooltip:function(t){this.$store.commit("updatePageAnalyzeTooltip",t)},markedSymbol:function(t,e){var n;switch(t){case"circle":n=j["symbols"][0];break;case"cross":n=j["symbols"][1];break;case"diamond":n=j["symbols"][2];break;case"square":n=j["symbols"][3];break;case"star":n=j["symbols"][4];break;case"triangle":n=j["symbols"][5];break;case"wye":n=j["symbols"][6];break;default:throw new Error("type error !\ncircle cross diamond square star triangle wye")}return j["symbol"]().type(n).size(e)()}},watch:{nodesNum:function(t,e){if(Math.floor(t/10)!==Math.floor(e/10)){var n=Math.floor(t/10)+1;this.sankey.extent([[1,5],[this.width*n-1,this.height-5]])}}}},te=Qt,ee=(n("b59a"),Object(E["a"])(te,$t,Mt,!1,null,null,null)),ne=ee.exports;function re(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ie(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?re(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ae={name:"PageAnalyze",components:{TimeOrder:Vt,DataFlow:ne,StaticForce:bt},data:function(){return{chart:{}}},computed:ie({},Object(s["c"])({visualData:function(t){return t.data.visualData},width:function(t){return.7*t.view.dpiX},height:function(t){return t.view.dpiY-64},colorPalette:function(t){return t.view.colorPalette},backgroundColor:function(t){return t.view.backgroundColor},contrastColor:function(t){return t.view.contrastColor},operations:function(t){return t.analyze.operations},currentOperations:function(t){return t.analyze.currentOperations},tooltipNodes:function(t){return t.analyze.pageAnalyzeTooltipData.nodes},tooltipLinks:function(t){return t.analyze.pageAnalyzeTooltipData.links}}),{},Object(s["b"])(["nodes","links","nodesNumber","generateUUID"])),mounted:function(){},activated:function(){},methods:{}},oe=ae,se=Object(E["a"])(oe,Ut,Et,!1,null,null,null),ce=se.exports,le=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("button",{on:{click:function(e){return t.$emit("welcome")}}},[t._v("Click me to be welcomed")])])},ue=[];function de(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function he(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?de(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var fe={name:"Test",data:function(){return{testData:1}},computed:he({},Object(s["c"])({}),{},Object(s["b"])([])),mounted:function(){j["pie"]().sort(null).value((function(t){return t.value}))},methods:{testFn:function(){}}},pe=fe,ye=Object(E["a"])(pe,le,ue,!1,null,null,null),ve=ye.exports;function be(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function me(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?be(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ge={name:"app",components:{PageData:N,PageView:_t,PageAnalyze:ce,Test:ve},data:function(){return{currentPageKey:"1",t:{a:1,b:2}}},methods:{testFn:function(){alert("123")}},computed:me({},Object(s["c"])({selectedDataset:function(t){return t.data.selectedDataset}}),{currentPage:function(){var t;switch(this.currentPageKey){case"1":t="PageData";break;case"2":t="PageView";break;case"3":t="PageAnalyze";break;default:break}return t},dataSelected:function(){return""!==this.selectedDataset},pageViewTooltipTitle:function(){return this.dataSelected?"数据可视化界面":"请先在左侧选择数据"},pageAnalyzeTooltipTitle:function(){return this.dataSelected?"交互分析界面":"请先在左侧选择数据"}}),mounted:function(){console.log(this),console.log(this.$children),console.log("state",this.$store.state),console.log("getters",this.$store.getters)}},Oe=ge,we=(n("7e9a"),Object(E["a"])(Oe,i,a,!1,null,"7f60e522",null)),ke=we.exports,xe=n("82ae"),De=n.n(xe),je=(n("ec9d"),n("2fee")),Pe=n("ad6c3"),Se=n("d175"),Ce=n("74c3"),_e=n("dc2f"),Ue=n("492a"),Ee=n("15db"),Te=n("d879"),Ne=n("3660"),Ae=n("b483"),Ie=n("f2a3"),ze=n("3d1d"),Be=n("5974"),Fe=n("b695"),Ve=n("be5b"),$e=n("c4d0"),Me=n("11c4"),Ge=n("c79a"),Le=n("3159"),Re=n("56c9"),Ke=n("eef3"),We=n("9932");r["a"].prototype.$message=je["a"],r["a"].prototype.$axios=De.a,r["a"].prototype.$d3=j,r["a"].use(Pe["a"]),r["a"].use(Se["a"]),r["a"].use(Ce["a"]),r["a"].use(_e["a"]),r["a"].use(Ue["a"]),r["a"].use(Ee["a"]),r["a"].use(Te["a"]),r["a"].use(Ne["a"]),r["a"].use(Ae["a"]),r["a"].use(Ie["a"]),r["a"].use(ze["a"]),r["a"].use(Be["a"]),r["a"].use(Fe["a"]),r["a"].use(Ve["a"]),r["a"].use($e["b"]),r["a"].use(Me["a"]),r["a"].use(Ge["a"]),r["a"].use(Le["a"]),r["a"].use(Re["a"]),r["a"].use(Ke["a"]),r["a"].use(We["a"]),r["a"].config.productionTip=!1,new r["a"]({store:D,render:function(t){return t(ke)}}).$mount("#app")},"63f8":function(t,e,n){"use strict";var r=n("de8c"),i=n.n(r);i.a},6408:function(t,e,n){},"7e9a":function(t,e,n){"use strict";var r=n("9bd7"),i=n.n(r);i.a},"86d6":function(t,e,n){"use strict";var r=n("0255"),i=n.n(r);i.a},"91fb":function(t,e,n){},9910:function(t,e,n){},"9bd7":function(t,e,n){},b59a:function(t,e,n){"use strict";var r=n("9910"),i=n.n(r);i.a},de8c:function(t,e,n){}});