(function(t){function i(i){for(var s,a,r=i[0],l=i[1],c=i[2],h=0,d=[];h<r.length;h++)a=r[h],n[a]&&d.push(n[a][0]),n[a]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(i);while(d.length)d.shift()();return o.push.apply(o,c||[]),e()}function e(){for(var t,i=0;i<o.length;i++){for(var e=o[i],s=!0,r=1;r<e.length;r++){var l=e[r];0!==n[l]&&(s=!1)}s&&(o.splice(i--,1),t=a(a.s=e[0]))}return t}var s={},n={app:0},o=[];function a(i){if(s[i])return s[i].exports;var e=s[i]={i:i,l:!1,exports:{}};return t[i].call(e.exports,e,e.exports,a),e.l=!0,e.exports}a.m=t,a.c=s,a.d=function(t,i,e){a.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,i){if(1&i&&(t=a(t)),8&i)return t;if(4&i&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(a.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var s in t)a.d(e,s,function(i){return t[i]}.bind(null,s));return e},a.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(i,"a",i),i},a.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},a.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=i,r=r.slice();for(var c=0;c<r.length;c++)i(r[c]);var u=l;o.push([0,"chunk-vendors"]),e()})({0:function(t,i,e){t.exports=e("56d7")},"0d40":function(t,i,e){},"56d7":function(t,i,e){"use strict";e.r(i);e("cadf"),e("551c"),e("f751"),e("097d");var s=e("2b0e"),n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"app"}},[e("a-layout",{staticStyle:{"min-height":"100vh"},attrs:{id:"components-layout-demo-top-side-2"}},[e("a-layout-header",{staticClass:"header"},[e("div",{staticClass:"logo"}),e("a-menu",{style:{lineHeight:"64px"},attrs:{theme:"dark",mode:"horizontal",defaultSelectedKeys:["2"]}},[e("a-menu-item",{key:"1"},[t._v("nav 1")]),e("a-menu-item",{key:"2"},[t._v("nav 2")]),e("a-menu-item",{key:"3"},[t._v("nav 3")])],1)],1),e("a-layout",[e("a-layout-sider",{staticStyle:{background:"#fff"},attrs:{width:"200",theme:"light",collapsible:"",collapsedWidth:"80"}},[e("a-menu",{style:{height:"100%",borderRight:0},attrs:{mode:"inline",defaultSelectedKeys:["1"],defaultOpenKeys:["sub1"],inlineIndent:24}},[e("a-sub-menu",{key:"sub1"},[e("span",{attrs:{slot:"title"},slot:"title"},[e("a-icon",{attrs:{type:"user"}}),e("span",[t._v("opration")])],1),e("a-menu-item",[e("a-button",{style:{margin:"1px"},attrs:{type:"primary",block:"block"}},[t._v("save")])],1),e("a-menu-item",{on:{click:t.onVisClick}},[e("span",[t._v("click")]),e("span",{style:{display:"block",float:"right"}},[e("a-switch",{on:{change:function(i){t.visSwitched=!0}},model:{value:t.visClick,callback:function(i){t.visClick=i},expression:"visClick"}})],1)]),e("a-menu-item",{on:{click:t.onVisBrush}},[e("span",[t._v("brush")]),e("span",{style:{display:"block",float:"right"}},[e("a-switch",{on:{change:function(i){t.visSwitched=!0}},model:{value:t.visBrush,callback:function(i){t.visBrush=i},expression:"visBrush"}})],1)]),e("a-menu-item",{key:"1",on:{click:t.onVisDrag}},[e("span",[t._v("drag")]),e("span",{style:{display:"block",float:"right"}},[e("a-switch",{on:{change:function(i){t.visSwitched=!0}},model:{value:t.visDrag,callback:function(i){t.visDrag=i},expression:"visDrag"}})],1)]),e("a-menu-item",{on:{click:t.onVisMouseover}},[e("span",[t._v("mouseover")]),e("span",{style:{display:"block",float:"right"}},[e("a-switch",{on:{change:function(i){t.visSwitched=!0}},model:{value:t.visMouseover,callback:function(i){t.visMouseover=i},expression:"visMouseover"}})],1)])],1),e("a-sub-menu",{key:"sub2"},[e("span",{attrs:{slot:"title"},slot:"title"},[e("a-icon",{attrs:{type:"laptop"}}),e("span",[t._v("display")])],1),e("a-menu-item",{on:{click:t.onVisShowIds}},[e("span",[t._v("visShowIds")]),e("span",{style:{display:"block",float:"right"}},[e("a-switch",{on:{change:function(i){t.visSwitched=!0}},model:{value:t.visShowIds,callback:function(i){t.visShowIds=i},expression:"visShowIds"}})],1)]),e("a-menu-item",{key:"4"},[t._v("OprationView")]),e("a-menu-item",{key:"5"},[t._v("DataFlow")]),e("a-menu-item",{key:"6"},[t._v("OprationFlow")])],1),e("a-sub-menu",{key:"sub3"},[e("span",{attrs:{slot:"title"},slot:"title"},[e("a-icon",{attrs:{type:"notification"}}),e("span",[t._v("sub3")])],1),e("a-menu-item",{key:"9"},[t._v("option9")]),e("a-menu-item",{key:"10"},[t._v("option10")]),e("a-menu-item",{key:"11"},[t._v("option11")]),e("a-menu-item",{key:"12"},[t._v("option12")])],1)],1)],1),e("a-layout",{staticStyle:{padding:"0 24px 0 5px"}},[e("a-layout-content",{style:{background:"#fff",padding:"24px",margin:0}},[e("ForceChart",{attrs:{visClick:t.visClick,visBrush:t.visBrush,visDrag:t.visDrag,visMouseover:t.visMouseover,visShowIds:t.visShowIds}})],1)],1)],1)],1)],1)},o=[],a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("svg",{style:{border:"1px solid #305dff"},attrs:{width:this.chartWidth,height:this.chartHeight}})},r=[],l=(e("7514"),e("b54a"),e("5698")),c={name:"ForceChart",props:{visClick:Boolean,visBrush:Boolean,visDrag:Boolean,visMouseover:Boolean,visShowIds:Boolean},data:function(){return{chartWidth:"960",chartHeight:"600",link:l["k"](),node:l["k"](),linkData:[],nodeData:[],vis:l["k"](),simulation:{},brushG:l["k"](),opacityNodes:l["k"](),opacityLinks:l["k"](),opacityTexts:l["k"](),text:l["k"]()}},mounted:function(){console.log(this);var t=l["j"](this.$el),i=+this.chartWidth,e=+this.chartHeight;this.vis=t.append("g"),this.vis.append("rect").attr("width",i).attr("height",e).style("fill","none").style("pointer-events","all"),this.simulation=l["g"]().force("link",l["e"]().id(function(t){return t.id})).force("charge",l["f"]()).force("center",l["d"](i/2,e/2));var s=l["a"]().extent([[0,0],[i,e]]).on("start brush",this.brushed);this.brushG=this.vis.append("g").call(s).attr("class","brush").call(s.move,[[0,0],[1,1]]),this.visBrush?this.brushG.style("display","inline"):this.brushG.style("display","none"),this.link=this.vis.append("g").attr("class","links"),this.node=this.vis.append("g").attr("class","nodes"),this.text=this.vis.append("g").attr("class","texts"),this.test()},methods:{load:function(t,i){this.nodeData=t,this.linkData=i},update:function(){var t=function(t){var i=l["i"];return i[t.group]};this.link=this.link.selectAll("line").data(this.linkData).enter().append("line"),this.node=this.node.selectAll("circle").data(this.nodeData).enter().append("circle").attr("r",4).attr("class","display").attr("fill",t),this.text=this.text.selectAll("text").data(this.node.data()).enter().append("text").attr("text-anchor","middle").attr("font-family","Avenir").attr("font-size","10").attr("dy","-0.5em").text(function(t){return t.id}).attr("fill",t).style("-webkit-user-select","none").style("-moz-user-select","none").style("-ms-user-select","none").style("user-select","none"),this.simulation.nodes(this.node.data()).on("tick",this.ticked),this.simulation.force("link").links(this.link.data())},bindEvents:function(){this.node.call(l["b"]().on("start",this.dragstarted).on("drag",this.dragged).on("end",this.dragended)),this.node.on("click",this.clickSelect),this.node.on("mouseover",this.mouseover),this.node.on("mouseout",this.mouseout);var t=this.node;function i(i){var e=i.index,s=t.filter(function(t){return t.index===e});s.dispatch(l["c"].type)}this.text.call(l["b"]().on("start",this.dragstarted).on("drag",this.dragged).on("end",this.dragended)),this.text.on("click",i),this.text.on("mouseover",i),this.text.on("mouseout",i)},ticked:function(){this.link.attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y}),this.node.attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}),this.visShowIds&&this.text.attr("x",function(t){return t.x}).attr("y",function(t){return t.y})},brushed:function(){var t=l["c"].selection;this.node.classed("selected",function(i){return t[0][0]<=i.x&&t[0][1]<=i.y&&i.x<=t[1][0]&&i.y<=t[1][1]})},dragstarted:function(t){this.visDrag&&(l["c"].active||this.simulation.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y)},dragged:function(t){this.visDrag&&(t.fx=l["c"].x,t.fy=l["c"].y)},dragended:function(t){this.visDrag&&(l["c"].active||this.simulation.alphaTarget(0),t.fx=null,t.fy=null)},clickSelect:function(t,i,e){if(this.visClick){var s=l["j"](e[i]);s.classed("selected")?s.classed("selected",!1):s.classed("selected",!0)}},mouseover:function(t){if(this.visMouseover){var i=null,e=t.id;this.opacityLinks=this.link.filter(function(t){return t.source.id!==e&&t.target.id!==e}),i=this.link.filter(function(t){return t.source.id===e||t.target.id===e}),this.opacityNodes=this.node.filter(function(t){var e=i.data();for(var s in e)if(t.id===e[s].source.id||t.id===e[s].target.id)return!1;return!0}),this.node.filter(function(t){var e=i.data();for(var s in e)if(t.id===e[s].source.id||t.id===e[s].target.id)return!0;return!1});var s=this.opacityNodes.data().map(function(t){return t.index});this.opacityTexts=this.text.filter(function(t){return void 0!==s.find(function(i){return i===t.index})}//!==undefined 防止返回0误认为false
),this.opacityNodes.transition().style("fill-opacity",.2).style("stroke-opacity",.2),this.opacityLinks.transition().style("stroke-opacity",0),this.opacityTexts.transition().style("fill-opacity",0)}},mouseout:function(){this.visMouseover&&(this.opacityNodes.transition().delay(200).style("fill-opacity",null).style("stroke-opacity",null),this.opacityLinks.transition().delay(200).style("stroke-opacity",null),this.opacityTexts.transition().delay(200).style("fill-opacity",null))},test:function(){var t=this;l["h"]("./static/miserables.json").then(function(i){t.load(i.nodes,i.links),t.update(),t.bindEvents()}).catch(function(t){console.log(t)})}},computed:{},watch:{visBrush:function(t){t?this.brushG.style("display","inline"):this.brushG.style("display","none")},visShowIds:function(t){t?this.text.attr("display","inline"):this.text.attr("display","none")}}},u=c,h=(e("8ae9"),e("2877")),d=Object(h["a"])(u,a,r,!1,null,null,null),v=d.exports,f={name:"app",components:{ForceChart:v},data:function(){return{collapsed:!1,visClick:!1,visBrush:!1,visDrag:!0,visMouseover:!1,visSwitched:!1,visShowIds:!1}},methods:{onVisClick:function(){this.visSwitched?this.visSwitched=!1:this.visClick=!this.visClick},onVisBrush:function(){this.visSwitched?this.visSwitched=!1:this.visBrush=!this.visBrush},onVisDrag:function(){this.visSwitched?this.visSwitched=!1:this.visDrag=!this.visDrag},onVisMouseover:function(){this.visSwitched?this.visSwitched=!1:this.visMouseover=!this.visMouseover},onVisShowIds:function(){this.visSwitched?this.visSwitched=!1:this.visShowIds=!this.visShowIds},test:function(){console.log("c")},test1:function(t){console.log(t),console.log(t.target)}}},p=f,y=(e("efc1"),Object(h["a"])(p,n,o,!1,null,"77f8b312",null)),g=y.exports,m=(e("202f"),e("0c63")),k=e("5efb"),b=e("98c5"),x=e("55f1"),w=e("160c");s["a"].use(m["a"]),s["a"].use(k["a"]),s["a"].use(b["a"]),s["a"].use(x["a"]),s["a"].use(w["a"]),s["a"].config.productionTip=!1,new s["a"]({render:function(t){return t(g)}}).$mount("#app")},"5e61":function(t,i,e){},"8ae9":function(t,i,e){"use strict";var s=e("0d40"),n=e.n(s);n.a},efc1:function(t,i,e){"use strict";var s=e("5e61"),n=e.n(s);n.a}});
//# sourceMappingURL=app.676e3478.js.map